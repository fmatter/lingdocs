<!doctype html>
<html>
  <head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="examples.css" />
    <link rel="stylesheet" href="styling.css" />
    <link rel="stylesheet" href="tables.css" />
    <link rel="stylesheet" href="alignment.css" />
    <link rel="stylesheet" href="glossing.css" />
    <title>{{ cookiecutter.project_title }}</title>
    <style>
      /*adapted from https://code-boxx.com/collapsible-list-html-css-js/#sec-download*/
      /* (A) CONTAINER */
      .collapse,
      .collapse ul {
        list-style-type: none;
        padding-left: 10px;
      }

      /* (C) TOGGLE */
      .toggleWrap {
        /*  padding: 10px;*/
        cursor: pointer;
      }
      /*.toggleWrap::before {
  display: inline-block;
  width: 15px;
  content: "ðŸž‚";
}*/
      /*.toggleWrap.show::before { content: "ðŸžƒ"; }*/

      /* (D) SHOW/HIDE */
      .collapse ol {
        display: none;
      }
      .toggleWrap.show + ol {
        display: block;
      }

      /* 1. Enable smooth scrolling */
      html {
        /*  scroll-behavior: smooth;*/
      }

      /* 2. Make nav sticky */
      nav {
        position: sticky;
        top: 2rem;
        align-self: start;
      }

      /* 3. ScrollSpy active styles (see JS tab for activation) */
      .toc li.active > span > a {
        color: #333;
        font-weight: 500;
      }

      .toc li.active > a {
        color: #333;
        font-weight: 500;
      }

      .toc div {
        text-decoration: none;
        display: block;
        padding: 0.125rem 0;
        color: #ccc;
        transition: all 50ms ease-in-out; /* ðŸ’¡ This small transition makes setting of the active state smooth */
      }

      /* Sidebar Navigation */
      .toc {
        padding-left: 0;
      }

      .toc a {
        text-decoration: none;
        display: block;
        padding: 0.125rem 0;
        color: #ccc;
        transition: all 50ms ease-in-out; /* ðŸ’¡ This small transition makes setting of the active state smooth */
      }

      .toc a:hover,
      .toc a:focus {
        color: #666;
      }

      /** Poor man's reset **/
      * {
        box-sizing: border-box;
      }

      html,
      body {
        background: #fff;
      }

      ul,
      ol {
        list-style: none;
        margin: 0;
        padding: 0;
      }
      li {
        margin-left: 1rem;
      }

      h1 {
        font-weight: 300;
      }

      /** page layout **/
      main {
        display: grid;
        grid-template-columns: 20em 1fr;
        max-width: 100em;
        width: 90%;
        margin: 0;
      }
    </style>
  </head>
  <body>
    <main>
      <div>
        <nav class="toc">
          <ol id="nav-items" class="collapse"></ol>
        </nav>
      </div>
      <div>
        <article>
          <h1>{{ cookiecutter.project_title }}</h1>
          <div class="author">{{ cookiecutter.author }}</div>
          <div class="version">version {{ cookiecutter.version }}</div>
          {% if cookiecutter.abstract %}
          <div class="abstract">
            <b>Abstract</b>
            <p>{{ cookiecutter.abstract }}</p>
          </div>
          {% endif %} {{ cookiecutter.content }}
          <script>
            {{cookiecutter.glossing_abbrevs}}
          </script>
        </article>
      </div>
    </main>
    <script src="examples.js"></script>
    <script src="glossing.js"></script>
    <script src="crossref.js"></script>
    <script src="alignment.js"></script>
    <script type="text/javascript" src="https://livejs.com/live.js"></script>
    <script>
      numberExamples();
      numberSections();
      numberCaptions();
      resolveCrossrefs();
    </script>
    <script>
      var alignments = document.getElementsByClassName("alignment");
      for (var i = 0, alignment; (alignment = alignments[i]); i++) {
        alignment.innerHTML = plotWord(alignment.innerHTML, "span");
      }
    </script>
    {% if cookiecutter.conf.get("hypothes.is") %}
    <script src="https://hypothes.is/embed.js" async></script>
    {% endif %}
    <script type="text/javascript">
      document.querySelectorAll(".subitems").forEach(function (subitems) {
        if (subitems.children.length == 0) {
          subitems.parentNode.removeChild(subitems);
        }
      });
      repl = { "ðŸžƒ ": "ðŸž‚ ", "ðŸž‚ ": "ðŸžƒ " };
      function toggleArrow(tog) {
        tog.innerHTML = repl[tog.innerHTML];
      }

      var nav = document.getElementById("nav-items"); // get the div holding our eventual table of contents

      function collapse(target) {
        target.classList.remove("active");
        if (target.children[0].classList.contains("toggleWrap")) {
          target.children[0].classList.remove("show");
          toggleArrow(target.children[0].children[0])  
        }
      }

      function expand(target) {
        target.classList.add("active");
        if (target.children[0].classList.contains("toggleWrap")) {
          toggleArrow(target.children[0].children[0])  
          target.children[0].classList.add("show");
        }
      }

      function modifyTOC(target) {}

      window.addEventListener("DOMContentLoaded", () => {
        const observer = new IntersectionObserver((entries) => {
          entries.forEach((entry) => {
            const id = entry.target.getAttribute("id");
            target = document.querySelector(`nav [id="nav-${id}"]`);
            if (entry.intersectionRatio > 0) {
              expand(target);
            } else {
              collapse(target);
            }
          });
        });
        // Track all sections that have an `id` applied
        // document.querySelectorAll("h2, h3, h4, h5, h6").forEach((section) => {
        document.querySelectorAll("section[id]").forEach((section) => {
          observer.observe(section);
        });
      });
      window.addEventListener("load", () => {
        for (let i of document.querySelectorAll(".collapse ol")) {
          let tog = document.createElement("span");
          tog.classList.add("toggle");
          tog.innerHTML = "ðŸž‚ ";
          tog.onclick = function () {
            tog.parentNode.classList.toggle("show");
            toggleArrow(tog);
          };
          i.previousSibling.style = "display: inline;";
          let line = document.createElement("span");
          line.classList.add("toggleWrap");
          line.appendChild(tog);
          line.appendChild(i.previousSibling);
          i.parentElement.insertBefore(line, i);
        }
      });
    </script>
  </body>
</html>
